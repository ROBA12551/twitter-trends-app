<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>TwiiterChan - Download Ranking System</title>
  <meta name="build-id" content="CHECK-00f99e5">
  <meta http-equiv="Delegate-CH" content="Sec-CH-UA https://s.pemsrv.com; Sec-CH-UA-Mobile https://s.pemsrv.com; Sec-CH-UA-Arch https://s.pemsrv.com; Sec-CH-UA-Model https://s.pemsrv.com; Sec-CH-UA-Platform https://s.pemsrv.com; Sec-CH-UA-Platform-Version https://s.pemsrv.com; Sec-CH-UA-Bitness https://s.pemsrv.com; Sec-CH-UA-Full-Version-List https://s.pemsrv.com; Sec-CH-UA-Full-Version https://s.pemsrv.com;">
  <meta http-equiv="Delegate-CH" content="Sec-CH-UA https://s.magsrv.com; Sec-CH-UA-Mobile https://s.magsrv.com; Sec-CH-UA-Arch https://s.magsrv.com; Sec-CH-UA-Model https://s.magsrv.com; Sec-CH-UA-Platform https://s.magsrv.com; Sec-CH-UA-Platform-Version https://s.magsrv.com; Sec-CH-UA-Bitness https://s.magsrv.com; Sec-CH-UA-Full-Version-List https://s.magsrv.com; Sec-CH-UA-Full-Version https://s.magsrv.com;">

  <!-- Basic SEO -->
  <meta name="description" content="TwiiterChan is a web application that displays trending URLs in real-time ranking and saves them for easy access.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Open Graph (for URL sharing) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="TwiiterChan | Real-time Download Ranking">
  <meta property="og:description" content="Display and save trending files in real-time ranking. Never miss trending content again.">
  <meta property="og:url" content="https://twitterchan.netlify.app/">
  <meta property="og:image" content="https://twitterchan.netlify.app/images/gofile.png">
  <meta property="og:site_name" content="TwiiterChan">

  <!-- X (Twitter) Specific -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="TwiiterChan">
  <meta name="twitter:description" content="Real-time ranking display and file management web application.">
  <meta name="twitter:image" content="https://twitterchan.netlify.app/images/gofile.png">

  <!-- Optional -->
  <meta name="theme-color" content="#0f172a">

  <!-- Push Notification Script -->
  <script type="application/javascript">
    pn_idzone = 5829204;
    pn_sleep_seconds = 0;
    pn_is_self_hosted = 1;
    pn_soft_ask = 0;
    pn_filename = "/worker.js"; 
  </script>
  <script type="application/javascript" src="https://js.wpnsrv.com/pn.php"></script>

  <!-- Desktop Fullpage Interstitial Ad -->
  <script async type="application/javascript" src="https://a.pemsrv.com/ad-provider.js"></script>
  <ins class="eas6a97888e35" data-zoneid="5829220"></ins>
  <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>

  <!-- Popunder Script -->
  <script type="application/javascript">
(function() {
    function randStr(e,t){for(var n="",r=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o=0;o<e;o++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}function generateContent(){return void 0===generateContent.val&&(generateContent.val="document.dispatchEvent("+randStr(4*Math.random()+3)+");"),generateContent.val}try{Object.defineProperty(document.currentScript,"innerHTML",{get:generateContent}),Object.defineProperty(document.currentScript,"textContent",{get:generateContent})}catch(e){};

    var adConfig = {
    "ads_host": "a.pemsrv.com",
    "syndication_host": "s.pemsrv.com",
    "idzone": 5829218,
    "popup_fallback": false,
    "popup_force": false,
    "chrome_enabled": true,
    "new_tab": false,
    "frequency_period": 720,
    "frequency_count": 1,
    "trigger_method": 3,
    "trigger_class": "",
    "trigger_delay": 0,
    "capping_enabled": true,
    "tcf_enabled": true,
    "only_inline": false
};

var popMagic={version:7,cookie_name:"",url:"",config:{},open_count:0,top:null,browser:null,venor_loaded:!1,venor:!1,tcfData:null,configTpl:{ads_host:"",syndication_host:"",idzone:"",frequency_period:720,frequency_count:1,trigger_method:1,trigger_class:"",popup_force:!1,popup_fallback:!1,chrome_enabled:!0,new_tab:!1,cat:"",tags:"",el:"",sub:"",sub2:"",sub3:"",only_inline:!1,trigger_delay:0,capping_enabled:!0,tcf_enabled:!1,cookieconsent:!0,should_fire:function(){return!0},on_redirect:null},init:function(e){if(void 0!==e.idzone&&e.idzone){void 0===e.customTargeting&&(e.customTargeting=[]),window.customTargeting=e.customTargeting||null;var o=Object.keys(e.customTargeting).filter(function(e){return e.search("ex_")>=0});for(var t in o.length&&o.forEach(function(e){return this.configTpl[e]=null}.bind(this)),this.configTpl)Object.prototype.hasOwnProperty.call(this.configTpl,t)&&(void 0!==e[t]?this.config[t]=e[t]:this.config[t]=this.configTpl[t]);if(void 0!==this.config.idzone&&""!==this.config.idzone){!0!==this.config.only_inline&&this.loadHosted();var i=this;this.checkTCFConsent(function(){"complete"===document.readyState?i.preparePopWait():i.addEventToElement(window,"load",i.preparePop)})}}},loadHosted:function(){var e=document.createElement("script");for(var o in e.type="application/javascript",e.async=!0,e.src="//"+this.config.ads_host+"/popunder1000.js",e.id="popmagicldr",this.config)Object.prototype.hasOwnProperty.call(this.config,o)&&"ads_host"!==o&&"syndication_host"!==o&&e.setAttribute("data-exo-"+o,this.config[o]);var t=document.getElementsByTagName("body").item(0);t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},preparePopWait:function(){setTimeout(popMagic.preparePop,400)},preparePop:function(){popMagic.buildUrl();var e=document.createElement("script");e.type="application/javascript",e.async=!0,e.src="//"+popMagic.config.ads_host+"/popunder1000.js",document.getElementsByTagName("body")[0].appendChild(e)},buildUrl:function(){var e="https:"!==document.location.protocol?"https:":document.location.protocol,o=top===self?document.URL:document.referrer;this.url=e+"//"+this.config.syndication_host+"/v1/link.php?idzone="+this.config.idzone+"&p="+encodeURIComponent(o)},checkTCFConsent:function(e){e()}};
    popMagic.init(adConfig);
})();
  </script>

  <!-- Popunder Script -->
  <script type="application/javascript">
(function() {
    function randStr(e,t){for(var n="",r=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o=0;o<e;o++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}function generateContent(){return void 0===generateContent.val&&(generateContent.val="document.dispatchEvent("+randStr(4*Math.random()+3)+");"),generateContent.val}try{Object.defineProperty(document.currentScript,"innerHTML",{get:generateContent}),Object.defineProperty(document.currentScript,"textContent",{get:generateContent})}catch(e){};

    var adConfig = {
    "ads_host": "a.pemsrv.com",
    "syndication_host": "s.pemsrv.com",
    "idzone": 5829218,
    "popup_fallback": false,
    "popup_force": false,
    "chrome_enabled": true,
    "new_tab": false,
    "frequency_period": 720,
    "frequency_count": 1,
    "trigger_method": 3,
    "trigger_class": "",
    "trigger_delay": 0,
    "capping_enabled": true,
    "tcf_enabled": true,
    "only_inline": false
};

window.document.querySelectorAll||(document.querySelectorAll=document.body.querySelectorAll=Object.querySelectorAll=function(e,o,t,i,n){var r=document,a=r.createStyleSheet();for(n=r.all,o=[],t=(e=e.replace(/\[for\b/gi,"[htmlFor").split(",")).length;t--;){for(a.addRule(e[t],"k:v"),i=n.length;i--;)n[i].currentStyle.k&&o.push(n[i]);a.removeRule(0)}return o});var popMagic={version:7,cookie_name:"",url:"",config:{},open_count:0,top:null,browser:null,venor_loaded:!1,venor:!1,tcfData:null,configTpl:{ads_host:"",syndication_host:"",idzone:"",frequency_period:720,frequency_count:1,trigger_method:1,trigger_class:"",popup_force:!1,popup_fallback:!1,chrome_enabled:!0,new_tab:!1,cat:"",tags:"",el:"",sub:"",sub2:"",sub3:"",only_inline:!1,trigger_delay:0,capping_enabled:!0,tcf_enabled:!1,cookieconsent:!0,should_fire:function(){return!0},on_redirect:null},init:function(e){if(void 0!==e.idzone&&e.idzone){void 0===e.customTargeting&&(e.customTargeting=[]),window.customTargeting=e.customTargeting||null;var o=Object.keys(e.customTargeting).filter(function(e){return e.search("ex_")>=0});for(var t in o.length&&o.forEach(function(e){return this.configTpl[e]=null}.bind(this)),this.configTpl)Object.prototype.hasOwnProperty.call(this.configTpl,t)&&(void 0!==e[t]?this.config[t]=e[t]:this.config[t]=this.configTpl[t]);if(void 0!==this.config.idzone&&""!==this.config.idzone){!0!==this.config.only_inline&&this.loadHosted();var i=this;this.checkTCFConsent(function(){"complete"===document.readyState?i.preparePopWait():i.addEventToElement(window,"load",i.preparePop)})}}},getCountFromCookie:function(){if(!this.config.cookieconsent)return 0;var e=popMagic.getCookie(popMagic.cookie_name),o=void 0===e?0:parseInt(e);return isNaN(o)&&(o=0),o},getLastOpenedTimeFromCookie:function(){var e=popMagic.getCookie(popMagic.cookie_name),o=null;if(void 0!==e){var t=e.split(";")[1];o=t>0?parseInt(t):0}return isNaN(o)&&(o=null),o},shouldShow:function(e){if(e=e||!1,!popMagic.config.capping_enabled){var o=!0,t=popMagic.config.should_fire;try{e||"function"!=typeof t||(o=Boolean(t()))}catch(e){console.error("Error executing should fire callback function:",e)}return o&&0===popMagic.open_count}if(popMagic.open_count>=popMagic.config.frequency_count)return!1;var i=popMagic.getCountFromCookie(),n=popMagic.getLastOpenedTimeFromCookie(),r=Math.floor(Date.now()/1e3),a=n+popMagic.config.trigger_delay;return!(n&&a>r)&&(popMagic.open_count=i,!(i>=popMagic.config.frequency_count))},venorShouldShow:function(){return popMagic.venor_loaded&&"0"===popMagic.venor},setAsOpened:function(e){var o=e?e.target||e.srcElement:null,t={id:"",tagName:"",classes:"",text:"",href:"",elm:""};void 0!==o&&null!=o&&(t={id:void 0!==o.id&&null!=o.id?o.id:"",tagName:void 0!==o.tagName&&null!=o.tagName?o.tagName:"",classes:void 0!==o.classList&&null!=o.classList?o.classList:"",text:void 0!==o.outerText&&null!=o.outerText?o.outerText:"",href:void 0!==o.href&&null!=o.href?o.href:"",elm:o});var i=new CustomEvent("creativeDisplayed-"+popMagic.config.idzone,{detail:t});if(document.dispatchEvent(i),popMagic.config.capping_enabled){var n=1;n=0!==popMagic.open_count?popMagic.open_count+1:popMagic.getCountFromCookie()+1;var r=Math.floor(Date.now()/1e3);popMagic.config.cookieconsent&&popMagic.setCookie(popMagic.cookie_name,n+";"+r,popMagic.config.frequency_period)}else++popMagic.open_count},loadHosted:function(){var e=document.createElement("script");for(var o in e.type="application/javascript",e.async=!0,e.src="//"+this.config.ads_host+"/popunder1000.js",e.id="popmagicldr",this.config)Object.prototype.hasOwnProperty.call(this.config,o)&&"ads_host"!==o&&"syndication_host"!==o&&e.setAttribute("data-exo-"+o,this.config[o]);var t=document.getElementsByTagName("body").item(0);t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},preparePopWait:function(){setTimeout(popMagic.preparePop,400)},preparePop:function(){if("object"!=typeof exoJsPop101||!Object.prototype.hasOwnProperty.call(exoJsPop101,"add")){if(popMagic.top=self,popMagic.top!==self)try{top.document.location.toString()&&(popMagic.top=top)}catch(e){}if(popMagic.cookie_name="zone-cap-"+popMagic.config.idzone,popMagic.config.capping_enabled||(document.cookie=popMagic.cookie_name+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"),popMagic.shouldShow(!0)){var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&(popMagic.venor_loaded=!0,200==e.status?popMagic.venor=e.responseText:popMagic.venor="0")};var o="https:"!==document.location.protocol&&"http:"!==document.location.protocol?"https:":document.location.protocol;e.open("GET",o+"//"+popMagic.config.syndication_host+"/venor.php",!0);try{e.send()}catch(e){popMagic.venor_loaded=!0}}if(popMagic.buildUrl(),popMagic.browser=popMagic.browserDetector.getBrowserInfo(),popMagic.config.chrome_enabled||!popMagic.browser.isChrome){var t=popMagic.getPopMethod(popMagic.browser);popMagic.addEvent("click",t)}}},getPopMethod:function(e){return popMagic.config.popup_force||popMagic.config.popup_fallback&&e.isChrome&&e.version>=68&&!e.isMobile?popMagic.methods.popup:e.isMobile?popMagic.methods.default:e.isChrome?popMagic.methods.chromeTab:popMagic.methods.default},checkTCFConsent:function(e){if(this.config.tcf_enabled&&"function"==typeof window.__tcfapi){var o=this;window.__tcfapi("addEventListener",2,function(t,i){i&&(o.tcfData=t,"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||(window.__tcfapi("removeEventListener",2,function(){},t.listenerId),e()))})}else e()},buildUrl:function(){var e,o="https:"!==document.location.protocol&&"http:"!==document.location.protocol?"https:":document.location.protocol,t=top===self?document.URL:document.referrer,i={type:"inline",name:"popMagic",ver:this.version},n="";customTargeting&&Object.keys(customTargeting).length&&("object"==typeof customTargeting?Object.keys(customTargeting):customTargeting).forEach(function(o){"object"==typeof customTargeting?e=customTargeting[o]:Array.isArray(customTargeting)&&(e=scriptEl.getAttribute(o));var t=o.replace("data-exo-","");n+="&"+t+"="+e});var r=this.tcfData&&this.tcfData.gdprApplies&&!0===this.tcfData.gdprApplies?1:0;this.url=o+"//"+this.config.syndication_host+"/v1/link.php?cat="+this.config.cat+"&idzone="+this.config.idzone+"&type=8&p="+encodeURIComponent(t)+"&sub="+this.config.sub+(""!==this.config.sub2?"&sub2="+this.config.sub2:"")+(""!==this.config.sub3?"&sub3="+this.config.sub3:"")+"&block=1&el="+this.config.el+"&tags="+this.config.tags+"&scr_info="+function(e){var o=e.type+"|"+e.name+"|"+e.ver;return encodeURIComponent(btoa(o))}(i)+n+"&gdpr="+r+"&cb="+Math.floor(1e9*Math.random()),this.tcfData&&this.tcfData.tcString?this.url+="&gdpr_consent="+encodeURIComponent(this.tcfData.tcString):this.url+="&cookieconsent="+this.config.cookieconsent},addEventToElement:function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?(e["e"+o+t]=t,e[o+t]=function(){e["e"+o+t](window.event)},e.attachEvent("on"+o,e[o+t])):e["on"+o]=e["e"+o+t]},getTriggerClasses:function(){var e,o=[];-1===popMagic.config.trigger_class.indexOf(",")?e=popMagic.config.trigger_class.split(" "):e=popMagic.config.trigger_class.replace(/\s/g,"").split(",");for(var t=0;t<e.length;t++)""!==e[t]&&o.push("."+e[t]);return o},addEvent:function(e,o){var t;if("3"!=popMagic.config.trigger_method)if("2"!=popMagic.config.trigger_method||""==popMagic.config.trigger_class)if("4"!=popMagic.config.trigger_method||""==popMagic.config.trigger_class)if("5"!=popMagic.config.trigger_method||""==popMagic.config.trigger_class)popMagic.addEventToElement(document,e,o);else{var i="a"+popMagic.getTriggerClasses().map(function(e){return":not("+e+")"}).join("");t=document.querySelectorAll(i);for(var n=0;n<t.length;n++)popMagic.addEventToElement(t[n],e,o)}else{var r=popMagic.getTriggerClasses();popMagic.addEventToElement(document,e,function(e){r.some(function(o){return null!==e.target.closest(o)})||o.call(e.target,e)})}else{var a=popMagic.getTriggerClasses();for(t=document.querySelectorAll(a.join(", ")),n=0;n<t.length;n++)popMagic.addEventToElement(t[n],e,o)}else for(t=document.querySelectorAll("a"),n=0;n<t.length;n++)popMagic.addEventToElement(t[n],e,o)},setCookie:function(e,o,t){if(!this.config.cookieconsent)return!1;t=parseInt(t,10);var i=new Date;i.setMinutes(i.getMinutes()+parseInt(t));var n=encodeURIComponent(o)+"; expires="+i.toUTCString()+"; path=/";document.cookie=e+"="+n},getCookie:function(e){if(!this.config.cookieconsent)return!1;var o,t,i,n=document.cookie.split(";");for(o=0;o<n.length;o++)if(t=n[o].substr(0,n[o].indexOf("=")),i=n[o].substr(n[o].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))===e)return decodeURIComponent(i)},randStr:function(e,o){for(var t="",i=o||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},isValidUserEvent:function(e){return!(!("isTrusted"in e)||!e.isTrusted||"ie"===popMagic.browser.name||"safari"===popMagic.browser.name)||0!=e.screenX&&0!=e.screenY},isValidHref:function(e){if(void 0===e||""==e)return!1;return!/\s?javascript\s?:/i.test(e)},findLinkToOpen:function(e){var o=e,t=!1;try{for(var i=0;i<20&&!o.getAttribute("href")&&o!==document&&"html"!==o.nodeName.toLowerCase();)o=o.parentNode,i++;var n=o.getAttribute("target");n&&-1!==n.indexOf("_blank")||(t=o.getAttribute("href"))}catch(e){}return popMagic.isValidHref(t)||(t=!1),t||window.location.href},getPuId:function(){return"ok_"+Math.floor(89999999*Math.random()+1e7)},executeOnRedirect:function(){try{popMagic.config.capping_enabled||"function"!=typeof popMagic.config.on_redirect||popMagic.config.on_redirect()}catch(e){console.error("Error executing on redirect callback:",e)}},browserDetector:{browserDefinitions:[["firefox",/Firefox\/([0-9.]+)(?:\s|$)/],["opera",/Opera\/([0-9.]+)(?:\s|$)/],["opera",/OPR\/([0-9.]+)(:?\s|$)$/],["edge",/Edg(?:e|)\/([0-9._]+)/],["ie",/Trident\/7\.0.*rv:([0-9.]+)\).*Gecko$/],["ie",/MSIE\s([0-9.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["safari",/Version\/([0-9._]+).*Safari/],["chrome",/(?!Chrom.*Edg(?:e|))Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["bb10",/BB10;\sTouch.*Version\/([0-9.]+)/],["android",/Android\s([0-9.]+)/],["ios",/Version\/([0-9._]+).*Mobile.*Safari.*/],["yandexbrowser",/YaBrowser\/([0-9._]+)/],["crios",/CriOS\/([0-9.]+)(:?\s|$)/]],isChromeOrChromium:function(){var e=window.navigator,o=(e.userAgent||"").toLowerCase(),t=e.vendor||"";if(-1!==o.indexOf("crios"))return!0;if(e.userAgentData&&Array.isArray(e.userAgentData.brands)&&e.userAgentData.brands.length>0){var i=e.userAgentData.brands,n=i.some(function(e){return"Google Chrome"===e.brand}),r=i.some(function(e){return"Chromium"===e.brand})&&2===i.length;return n||r}var a=!!window.chrome,c=-1!==o.indexOf("edg"),p=!!window.opr||-1!==o.indexOf("opr"),s=!(!e.brave||!e.brave.isBrave),g=-1!==o.indexOf("vivaldi"),l=-1!==o.indexOf("yabrowser"),d=-1!==o.indexOf("samsungbrowser"),u=-1!==o.indexOf("ucbrowser");return a&&"Google Inc."===t&&!c&&!p&&!s&&!g&&!l&&!d&&!u},getBrowserInfo:function(){var e=window.navigator.userAgent,o={name:"other",version:"1.0",versionNumber:1,isChrome:this.isChromeOrChromium(),isMobile:!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WebOS|Windows Phone/i)};for(var t in this.browserDefinitions){var i=this.browserDefinitions[t];if(i[1].test(e)){var n=i[1].exec(e),r=n&&n[1].split(/[._]/).slice(0,3),a=Array.prototype.slice.call(r,1).join("")||"0";r&&r.length<3&&Array.prototype.push.apply(r,1===r.length?[0,0]:[0]),o.name=i[0],o.version=r.join("."),o.versionNumber=parseFloat(r[0]+"."+a);break}}return o}},methods:{default:function(e){if(!popMagic.shouldShow()||!popMagic.venorShouldShow()||!popMagic.isValidUserEvent(e))return!0;var o=e.target||e.srcElement,t=popMagic.findLinkToOpen(o);return window.open(t,"_blank"),popMagic.setAsOpened(e),popMagic.executeOnRedirect(),popMagic.top.document.location=popMagic.url,void 0!==e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!0},chromeTab:function(e){if(!popMagic.shouldShow()||!popMagic.venorShouldShow()||!popMagic.isValidUserEvent(e))return!0;if(void 0===e.preventDefault)return!0;e.preventDefault(),e.stopPropagation();var o=top.window.document.createElement("a"),t=e.target||e.srcElement;o.href=popMagic.findLinkToOpen(t),document.getElementsByTagName("body")[0].appendChild(o);var i=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!0,altKey:!1,shiftKey:!1,metaKey:!0,button:0});i.preventDefault=void 0,o.dispatchEvent(i),o.parentNode.removeChild(o),popMagic.executeOnRedirect(),window.open(popMagic.url,"_self"),popMagic.setAsOpened(e)},popup:function(e){if(!popMagic.shouldShow()||!popMagic.venorShouldShow()||!popMagic.isValidUserEvent(e))return!0;var o="";if(popMagic.config.popup_fallback&&!popMagic.config.popup_force){var t=Math.max(Math.round(.8*window.innerHeight),300);o="menubar=1,resizable=1,width="+Math.max(Math.round(.7*window.innerWidth),300)+",height="+t+",top="+(window.screenY+100)+",left="+(window.screenX+100)}var i=document.location.href,n=window.open(i,popMagic.getPuId(),o);popMagic.setAsOpened(e),setTimeout(function(){n.location.href=popMagic.url,popMagic.executeOnRedirect()},200),void 0!==e.preventDefault&&(e.preventDefault(),e.stopPropagation())}}};    popMagic.init(adConfig);
})();
  </script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary-color: #ff7f9c;
      --primary-light: #ffa0b8;
      --secondary-color: #b8d8e8;
      --accent-dark: #2a2a2a;
      --text-light: #7a7a7a;
      --border-light: #e8e0e5;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --success-color: #66d9a8;
      --error-color: #ff6b8f;
    }
    
    html { scroll-behavior: smooth; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #ffffff;
      color: var(--accent-dark);
      line-height: 1.6;
      transition: background-color 0.3s ease;
    }
    
    body.dark-mode {
      background: #1a1a1a;
      color: #e0e0e0;
    }
    
    body.dark-mode .container,
    body.dark-mode .nav-button,
    body.dark-mode .video-card,
    body.dark-mode .card,
    body.dark-mode textarea,
    body.dark-mode input,
    body.dark-mode .status-bar {
      background: #2a2a2a;
      color: #e0e0e0;
      border-color: #444;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
      background: white;
      transition: background-color 0.3s ease;
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 0.8s ease-out;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    h1 {
      font-size: 48px;
      font-weight: 300;
      margin-bottom: 8px;
      color: var(--primary-color);
    }
    
    .header-content {
      flex: 1;
    }
    
    .subtitle {
      font-size: 14px;
      color: var(--text-light);
    }
    
    .language-selector {
      display: flex;
      gap: 8px;
    }
    
    .lang-btn {
      padding: 8px 16px;
      background: var(--border-light);
      border: 1.5px solid var(--border-light);
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-light);
    }
    
    .lang-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .nav-tabs {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }
    
    .nav-button {
      padding: 12px 28px;
      background: white;
      border: 1.5px solid var(--border-light);
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-light);
    }
    
    .nav-button:hover {
      border-color: var(--secondary-color);
      transform: translateY(-2px);
    }
    
    .nav-button.active {
      background: var(--secondary-color);
      color: white;
      border-color: var(--secondary-color);
    }
    
    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      border: 1.5px solid var(--border-light);
      margin-bottom: 30px;
    }
    
    .card h2 {
      font-size: 18px;
      margin-bottom: 16px;
      color: var(--primary-color);
    }
    
    textarea, input[type="url"], input[type="text"] {
      width: 100%;
      padding: 12px 16px;
      border: 1.5px solid var(--border-light);
      border-radius: 8px;
      background: white;
      color: var(--accent-dark);
      font-size: 14px;
      margin-bottom: 12px;
    }
    
    textarea:focus, input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(255, 127, 156, 0.1);
    }
    
    textarea {
      min-height: 120px;
      font-family: 'Courier New', monospace;
      resize: vertical;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    button {
      padding: 11px 24px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      min-height: 44px;
    }
    
    button:hover {
      background: #ff6b8f;
      transform: translateY(-2px);
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    .sort-controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    
    .sort-btn {
      padding: 8px 16px;
      background: white;
      border: 1.5px solid var(--border-light);
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-light);
    }
    
    .sort-btn.active {
      background: var(--secondary-color);
      color: white;
      border-color: var(--secondary-color);
    }
    
    .status-bar {
      padding: 12px 16px;
      background: #f9f9f9;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 12px;
      color: var(--text-light);
      border: 1.5px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .status-bar.show {
      display: flex;
      animation: slideDown 0.3s ease;
    }
    
    .status-bar.success {
      background: #f0fdf4;
      border-color: var(--success-color);
      color: #166534;
    }
    
    .status-bar.error {
      background: #fef2f2;
      border-color: var(--error-color);
      color: #991b1b;
    }
    
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .refresh-controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .refresh-btn, .search-button {
      padding: 11px 24px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      font-size: 14px;
    }
    
    .refresh-btn:hover, .search-button:hover {
      background: #ff6b8f;
      transform: translateY(-2px);
    }
    
    .refresh-interval {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .refresh-interval select {
      padding: 8px 12px;
      border: 1.5px solid var(--border-light);
      border-radius: 6px;
      font-size: 13px;
      background: white;
      color: var(--accent-dark);
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .video-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      border: 1.5px solid var(--border-light);
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .video-card:hover {
      border-color: var(--secondary-color);
      box-shadow: 0 12px 32px rgba(184, 216, 232, 0.15);
      transform: translateY(-6px);
    }
    
    .video-thumbnail {
      width: 100%;
      height: 160px;
      background: linear-gradient(135deg, rgba(245, 232, 240, 0.8) 0%, rgba(232, 239, 245, 0.8) 100%), url(/images/gofile.png);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
      cursor: pointer;
    }
    
    .play-icon {
      width: 0;
      height: 0;
      border-left: 24px solid var(--primary-color);
      border-top: 14px solid transparent;
      border-bottom: 14px solid transparent;
      position: relative;
      z-index: 1;
    }
    
    .video-info {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .video-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--primary-color);
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .video-meta {
      font-size: 11px;
      color: var(--text-light);
      margin-bottom: 8px;
    }
    
    .video-actions {
      display: flex;
      gap: 8px;
    }
    
    .video-btn {
      flex: 1;
      padding: 8px 12px;
      font-size: 12px;
      border: 1px solid var(--border-light);
      border-radius: 6px;
      background: white;
      color: var(--primary-color);
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
    }
    
    .video-btn:hover {
      background: var(--primary-color);
      color: white;
    }
    
    .site-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      border: 1.5px solid var(--border-light);
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 20px;
      cursor: pointer;
    }

    .site-thumbnail {
      width: 100%;
      height: 140px;
      background: linear-gradient(135deg, rgba(245, 232, 240, 0.9) 0%, rgba(232, 239, 245, 0.9) 100%), url(/images/gofile.png);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 8px;
      margin-bottom: 12px;
      overflow: hidden;
    }
    
    .site-card:hover {
      border-color: var(--primary-color);
      transform: translateY(-6px);
      box-shadow: 0 12px 32px rgba(255, 127, 156, 0.2);
    }
    
    .site-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--primary-color);
    }
    
    .site-description {
      font-size: 12px;
      color: var(--text-light);
      margin-bottom: 16px;
      flex: 1;
    }
    
    .site-link {
      padding: 10px 16px;
      background: var(--primary-color);
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-weight: 5000;
      font-size: 13px;
      text-align: center;
      border: none;
      cursor: pointer;
      display: inline-block;
      width: 100%;
    }
    
    .site-link:hover {
      background: #ff6b8f;
    }
    
    .loading {
      text-align: center;
      padding: 60px 20px;
      color: #bbb;
    }
    
    .spinner {
      display: inline-block;
      width: 32px;
      height: 32px;
      border: 2px solid var(--border-light);
      border-top-color: var(--secondary-color);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 16px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .notification {
      position: fixed;
      top: 24px;
      right: 24px;
      padding: 14px 20px;
      background: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 13px;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .notification.show {
      display: block;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .notification.success {
      background: var(--success-color);
    }
    
    .notification.info {
      background: var(--secondary-color);
    }
    
    .mode-content.hidden {
      display: none;
    }
    
    .load-more-btn {
      padding: 14px 32px;
      background: var(--secondary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 16px;
      display: block;
      margin: 30px auto 0;
    }
    
    .load-more-btn:hover {
      background: #a0cce0;
      transform: translateY(-2px);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-top: 16px;
    }
    
    .stat-card {
      background: #f9f9f9;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      border: 1.5px solid var(--border-light);
    }
    
    .stat-number {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-color);
    }
    
    .stat-label {
      font-size: 11px;
      color: var(--text-light);
      margin-top: 4px;
      text-transform: uppercase;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s ease;
    }

    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 1200px;
      height: 85vh;
      max-height: 900px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    body.dark-mode .modal-content {
      background: #2a2a2a;
      color: #e0e0e0;
    }

    .modal-header {
      padding: 20px;
      border-bottom: 1.5px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
    }

    body.dark-mode .modal-header {
      background: #2a2a2a;
      border-color: #444;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: var(--text-light);
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      min-height: auto;
    }

    .modal-close:hover {
      background: var(--border-light);
      border-radius: 6px;
      transform: none;
    }

    body.dark-mode .modal-close:hover {
      background: #444;
    }

    .modal-body {
      flex: 1;
      overflow: hidden;
      background: white;
    }

    body.dark-mode .modal-body {
      background: #2a2a2a;
    }

    .modal-iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 0 0 12px 12px;
    }

    .modal-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      flex-direction: column;
      color: var(--text-light);
      background: white;
    }

    body.dark-mode .modal-loading {
      background: #2a2a2a;
    }

    .modal-loading .spinner {
      margin-bottom: 16px;
    }

    .modal-error {
      text-align: center;
      padding: 40px 20px;
      color: var(--error-color);
    }

    @media (max-width: 768px) {
      .modal-content {
        width: 95%;
        height: 90vh;
      }
      
      .modal-header {
        padding: 16px;
      }

      .modal-title {
        font-size: 16px;
      }

      .container { padding: 24px 16px; }
      h1 { font-size: 32px; }
      .grid { grid-template-columns: 1fr; }
      header { flex-direction: column; }
      .language-selector { justify-content: center; }
    }

    /* Video Ad Container Styling */
    body.dark-mode div[style*="linear-gradient(135deg, #f5f5f5"] {
      background: linear-gradient(135deg, #333 0%, #2a2a2a 100%) !important;
    }

    /* Banner Ad Container Styling */
    body.dark-mode div[style*="linear-gradient(135deg, #fff9e6"] {
      background: linear-gradient(135deg, #3a3a2a 0%, #2a2a1a 100%) !important;
      border-color: #666633 !important;
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <div class="header-content">
        <h1>TwiiterChan</h1>
        <p class="subtitle">Real-time Download Ranking</p>
      </div>
      <div class="language-selector">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="ja">日本語</button>
      </div>
    </header>
    
    <div class="nav-tabs">
      <button class="nav-button active" data-mode="ranking">Ranking</button>
      <button class="nav-button" data-mode="upload">Add URL</button>
      <button class="nav-button" data-mode="sites">Sites</button>
      <button class="nav-button" data-mode="settings">Settings</button>
      <a href="policy.html" style="padding: 12px 28px; background: white; border: 1.5px solid var(--border-light); border-radius: 8px; text-decoration: none; color: var(--text-light); font-weight: 500; transition: var(--transition);" onmouseover="this.style.borderColor='var(--secondary-color)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.borderColor='var(--border-light)'; this.style.transform='translateY(0)';">Policy</a>
      <a href="contact.html" style="padding: 12px 28px; background: white; border: 1.5px solid var(--border-light); border-radius: 8px; text-decoration: none; color: var(--text-light); font-weight: 500; transition: var(--transition);" onmouseover="this.style.borderColor='var(--secondary-color)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.borderColor='var(--border-light)'; this.style.transform='translateY(0)';">Contact</a>
    </div>

    <!-- Banner Ad Section - Premium Placement 0 (Top) -->
    <div style="display: flex; justify-content: center; align-items: center; margin: 20px 0 30px 0; padding: 20px; background: linear-gradient(135deg, #fff9e6 0%, #fff5cc 100%); border-radius: 12px; min-height: 100px; border: 1.5px solid #ffe680;">
      <ins class="eas6a97888e2" data-zoneid="5829212"></ins>
    </div>

    <!-- Ranking Mode -->
    <div id="ranking-mode" class="mode-content">
      <div class="refresh-controls">
        <button class="refresh-btn" id="refresh-btn">Refresh</button>
        <div class="refresh-interval">
          <label>Auto Refresh:</label>
          <select id="refresh-select">
            <option value="0">Off</option>
            <option value="30">30 seconds</option>
            <option value="60" selected>1 minute</option>
            <option value="300">5 minutes</option>
            <option value="600">10 minutes</option>
          </select>
        </div>
      </div>

      <div class="sort-controls">
        <button class="sort-btn active" data-sort="downloads">Most Downloads</button>
        <button class="sort-btn" data-sort="newest">Newest First</button>
        <button class="sort-btn" data-sort="popular">Trending Now</button>
      </div>

      <!-- Video Ad Section - Premium Placement -->
      <div style="display: flex; justify-content: center; align-items: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #f5f5f5 0%, #fafafa 100%); border-radius: 12px; min-height: 80px;">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
        <ins class="eas6a97888e37" data-zoneid="5829206"></ins>
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
      </div>

      <div class="status-bar">
        <div>Total <span id="total-count">0</span> URLs</div>
        <div id="last-update">Last Update: Waiting...</div>
      </div>
      
      <div class="grid" id="ranking-grid">
        <div class="loading">
          <div class="spinner"></div>
          <p>Loading ranking...</p>
        </div>
      </div>

      <!-- Banner Ad Section - Premium Placement 1 -->
      <div style="display: flex; justify-content: center; align-items: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #fff9e6 0%, #fff5cc 100%); border-radius: 12px; min-height: 100px; border: 1.5px solid #ffe680;">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
        <ins class="eas6a97888e2" data-zoneid="5829212"></ins>
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
      </div>

      <button class="load-more-btn" id="load-more-btn">Load More</button>
    </div>
    
    <!-- Upload Mode -->
    <div id="upload-mode" class="mode-content hidden">
      <div class="card">
        <h2>Direct Input</h2>
        <form id="uploadForm">
          <textarea id="gofileUrls" placeholder="Example:&#10;https://gofile.io/d/bZqtMw&#10;https://video.twimg.com/amplify_video/2009272347623346177/vid/avc1/1080x1920/3ozr_l7l7lvSDipA.mp4" required></textarea>
          <div class="button-group">
            <button type="submit" id="uploadBtn">Add URLs</button>
            <button type="reset">Clear</button>
          </div>
        </form>
        <div id="uploadStatus" class="status-bar" style="display: none;"></div>
        <div id="uploadStats" class="stats-grid" style="display: none;">
          <div class="stat-card">
            <div class="stat-number" id="totalUpload">0</div>
            <div class="stat-label">Input</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="addedUpload">0</div>
            <div class="stat-label">Added</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="duplicateUpload">0</div>
            <div class="stat-label">Duplicates</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Web Scraping</h2>
        <form id="scrapeForm">
          <input type="url" id="websiteUrl" placeholder="Example: https://example-video-site.com/" required>
          <button type="submit" id="scrapeBtn">Start Scraping</button>
        </form>
        <div id="scrapeStatus" class="status-bar" style="display: none;"></div>
        <div id="scrapeStats" class="stats-grid" style="display: none;">
          <div class="stat-card">
            <div class="stat-number" id="foundScrape">0</div>
            <div class="stat-label">Found</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="addedScrape">0</div>
            <div class="stat-label">Added</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="duplicateScrape">0</div>
            <div class="stat-label">Duplicates</div>
          </div>
        </div>
      </div>

      <!-- Video Ad Section - Secondary Placement -->
      <div style="display: flex; justify-content: center; align-items: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #f5f5f5 0%, #fafafa 100%); border-radius: 12px; min-height: 80px;">
        <ins class="eas6a97888e37" data-zoneid="5829206"></ins>
      </div>
    </div>

    <!-- Banner Ad Section - Premium Placement 2 (End of Upload) -->
    <div style="display: flex; justify-content: center; align-items: center; margin: 30px auto; padding: 20px; background: linear-gradient(135deg, #fff9e6 0%, #fff5cc 100%); border-radius: 12px; min-height: 100px; border: 1.5px solid #ffe680; max-width: 1400px;">
      <ins class="eas6a97888e2" data-zoneid="5829212"></ins>
    </div>

    <!-- Sites Mode -->
    <div id="sites-mode" class="mode-content hidden">
      <!-- Banner Ad Section - Premium Placement 3 (Sites) -->
      <div style="display: flex; justify-content: center; align-items: center; margin: 0 0 30px 0; padding: 20px; background: linear-gradient(135deg, #fff9e6 0%, #fff5cc 100%); border-radius: 12px; min-height: 100px; border: 1.5px solid #ffe680;">
        <ins class="eas6a97888e2" data-zoneid="5829212"></ins>
      </div>
      <div class="grid" id="sites-grid"></div>
    </div>
    
    <!-- Settings Mode -->
    <div id="settings-mode" class="mode-content hidden">
      <div class="card">
        <h2>Settings</h2>
        <label>
          <input type="checkbox" id="dark-mode">
          Dark Mode
        </label>
      </div>
    </div>
  </div>
  
  <div id="notification" class="notification"></div>

  <!-- Preview Modal -->
  <div id="previewModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Site Preview</h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <div class="modal-loading">
          <div class="spinner"></div>
          <p>Loading...</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Translations Data - English and Japanese Support
    const translations = {
      en: {
        title: 'TwiiterChan',
        subtitle: 'Real-time Download Ranking',
        ranking: 'Ranking',
        upload: 'Add URL',
        sites: 'Sites',
        settings: 'Settings',
        refresh: 'Refresh',
        autoRefresh: 'Auto Refresh:',
        off: 'Off',
        downloads: 'Most Downloads',
        newest: 'Newest First',
        popular: 'Trending Now',
        totalUrls: 'Total',
        individualUrl: 'URLs',
        lastUpdate: 'Last Update:',
        loadMore: 'Load More',
        directInput: 'Direct Input',
        scraping: 'Web Scraping',
        placeholder: 'Example:\nhttps://gofile.io/d/bZqtMw\nhttps://gofile.io/d/AfCq6H',
        add: 'Add URLs',
        clear: 'Clear',
        input: 'Input',
        added: 'Added',
        duplicate: 'Duplicates',
        websitePlaceholder: 'Example: https://example-video-site.com/',
        startScraping: 'Start Scraping',
        found: 'Found',
        darkMode: 'Dark Mode',
        copy: 'Copy ID',
        visit: 'Visit',
        loading: 'Loading ranking...',
        copied: 'ID copied!',
        updated: 'Ranking updated successfully',
        addUrlMessage: 'Add URLs to display ranking',
        noInputError: 'Please enter valid URLs',
        saved: 'URLs saved successfully',
        addedMessage: 'URLs added',
        duplicateMessage: 'duplicates excluded',
        scrapingProgress: 'Scraping in progress...',
        notFound: 'No files found on this website',
        scrapingComplete: 'Scraping completed successfully',
        corsError: 'CORS Error: Cannot scrape this site. Please enter URLs directly.',
        error: 'Error:',
        nsnn: 'NSNN Files',
        nsnnDesc: 'Latest trending files',
        gofileOfficial: 'Gofile.io',
        gofileOfficialDesc: 'Official file hosting site',
        twidouga: 'Twidouga.net',
        twidougaDesc: 'Trending video files'
      },
      ja: {
        title: 'Twitterちゃん。',
        subtitle: 'リアルタイムランキング表示',
        ranking: 'ランキング',
        upload: 'URL 投稿',
        sites: 'サイト一覧',
        settings: '設定',
        refresh: '更新',
        autoRefresh: '自動更新:',
        off: 'オフ',
        downloads: 'ダウンロード数',
        newest: '新規順',
        popular: 'リアルタイム人気',
        totalUrls: '合計',
        individualUrl: '個の URL',
        lastUpdate: '最終更新:',
        loadMore: '続きを読み込む',
        directInput: '直接入力',
        scraping: 'スクレイピング',
        placeholder: '例:\nhttps://gofile.io/d/bZqtMw\nhttps://gofile.io/d/AfCq6H',
        add: 'URL を追加',
        clear: 'クリア',
        input: '入力',
        added: '追加',
        duplicate: '重複',
        websitePlaceholder: '例: https://orevideo.pythonanywhere.com/',
        startScraping: 'スクレイピング開始',
        found: '見つかった',
        darkMode: 'ダークモード',
        copy: 'コピー',
        visit: '訪問',
        loading: 'ランキングを読み込んでいます...',
        copied: 'IDをコピーしました',
        updated: 'ランキングを更新しました',
        addUrlMessage: 'URL を追加してランキングを表示してください',
        noInputError: 'Gofile URL を入力してください',
        saved: 'URL を保存しました',
        addedMessage: '個の URL を追加しました',
        duplicateMessage: '個は重複',
        scrapingProgress: 'スクレイピング中...',
        notFound: 'このウェブサイトには Gofile URL が見つかりません',
        scrapingComplete: 'スクレイピングが完了しました',
        corsError: 'CORS エラー: このサイトはスクレイピングできません。直接 URL を入力してください。',
        error: 'エラー:',
        nsnn: 'NSNN Gofile',
        nsnnDesc: 'Twitter最新ファイル一覧',
        gofileOfficial: 'Gofile.io',
        gofileOfficialDesc: 'Twitterリアルタイムファイル一覧',
        twidouga: 'Twidouga.net',
        twidougaDesc: 'Twitterランキング一覧'
      }
    };

    let currentLanguage = 'en';

    function t(key) {
      return translations[currentLanguage]?.[key] || translations.en[key] || key;
    }

    function updateLanguage(lang) {
      currentLanguage = lang;
      document.querySelector('[data-mode="ranking"]').textContent = t('ranking');
      document.querySelector('[data-mode="upload"]').textContent = t('upload');
      document.querySelector('[data-mode="sites"]').textContent = t('sites');
      document.querySelector('[data-mode="settings"]').textContent = t('settings');
      document.querySelector('h1').textContent = t('title');
      document.querySelector('.subtitle').textContent = t('subtitle');
      document.getElementById('refresh-btn').textContent = t('refresh');
      document.querySelector('.refresh-interval label').textContent = t('autoRefresh');
      document.querySelector('[data-sort="downloads"]').textContent = t('downloads');
      document.querySelector('[data-sort="newest"]').textContent = t('newest');
      document.querySelector('[data-sort="popular"]').textContent = t('popular');
      document.getElementById('load-more-btn').textContent = t('loadMore');
      const uploadCards = document.querySelectorAll('#upload-mode .card');
      uploadCards[0].querySelector('h2').textContent = t('directInput');
      document.querySelector('#uploadForm button[type="submit"]').textContent = t('add');
      document.querySelector('#uploadForm button[type="reset"]').textContent = t('clear');
      uploadCards[1].querySelector('h2').textContent = t('scraping');
      document.getElementById('scrapeBtn').textContent = t('startScraping');
      document.querySelector('#settings-mode .card h2').textContent = t('settings');
      document.querySelector('label[for="dark-mode"]').textContent = t('darkMode');
      renderSites();
      renderRanking();
    }

    const state = {
      currentMode: 'ranking',
      currentSort: 'downloads',
      ranking: { byDownloads: [], byNewest: [], byPopular: [] },
      itemsPerPage: 12,
      currentPage: 0,
      autoRefreshTimer: null,
      isLoading: false
    };
    
    const sites = [
      { id: 0, name: () => t('nsnn'), url: 'https://nsnn.net/gofile.io?sort=new&page=1', description: () => t('nsnnDesc'), image: 'https://nsnn.net/favicon.ico' },
      { id: 1, name: () => 'twivideo.net', url: 'https://twivideo.net/?ranking', description: () => t('gofileOfficialDesc'), image: 'https://twivideo.net/favicon.ico' },
      { id: 2, name: () => t('twidouga'), url: 'https://www.twidouga.net', description: () => t('twidougaDesc'), image: 'https://www.twidouga.net/favicon.ico' },
      { id: 3, name: () => 'TWIIGLE', url: 'https://twiigle.com/', description: () => t('twidougaDesc'), image: 'https://twiigle.com/favicon.ico' },
      { id: 4, name: () => 'monsnode', url: 'https://monsnode.com', description: () => t('twidougaDesc'), image: 'https://monsnode.com/favicon.ico' },
      { id: 5, name: () => 'twicoco', url: 'https://twicoco.com/?type=history', description: () => t('twidougaDesc'), image: 'https://twicoco.com/favicon.ico' },
    ];
    
    // Modal Functionality - CORS Compatible
    function openModal(url, title) {
      const modal = document.getElementById('previewModal');
      const modalBody = document.getElementById('modalBody');
      const modalTitle = document.getElementById('modalTitle');

      modalTitle.textContent = title;

      // Show loading state
      modalBody.innerHTML = `
        <div class="modal-loading">
          <div class="spinner"></div>
          <p>Loading...</p>
        </div>
      `;

      // Create iframe (CORS compatible)
      const iframe = document.createElement('iframe');
      iframe.className = 'modal-iframe';
      iframe.src = url;
      iframe.sandbox.add('allow-same-origin', 'allow-scripts', 'allow-popups', 'allow-forms', 'allow-top-navigation');
      
      iframe.onload = () => {
        modalBody.innerHTML = '';
        modalBody.appendChild(iframe);
      };

      iframe.onerror = () => {
        modalBody.innerHTML = `
          <div class="modal-error">
            <p>Sorry, this site could not be loaded.</p>
            <p style="margin-top: 10px; font-size: 12px;">
              <a href="${url}" target="_blank" style="color: var(--primary-color); text-decoration: underline;">
                Open in new tab →
              </a>
            </p>
          </div>
        `;
      };

      // Timeout after 5 seconds if still loading
      setTimeout(() => {
        if (modalBody.querySelector('.modal-loading')) {
          iframe.onerror();
        }
      }, 5000);

      modal.classList.add('show');
    }

    function closeModal() {
      const modal = document.getElementById('previewModal');
      const modalBody = document.getElementById('modalBody');
      modal.classList.remove('show');
      modalBody.innerHTML = `
        <div class="modal-loading">
          <div class="spinner"></div>
          <p>Loading...</p>
        </div>
      `;
    }

    document.getElementById('previewModal').addEventListener('click', (e) => {
      if (e.target.id === 'previewModal') closeModal();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
    
    // Fetch ranking data from API
    async function fetchRanking() {
      try {
        state.isLoading = true;
        
        const response = await fetch('/.netlify/functions/get-urls-from-github');
        
        if (!response.ok) {
          throw new Error(`HTTP Error: ${response.status}`);
        }
        
        const text = await response.text();
        const result = JSON.parse(text);
        
        if (result.status === 'ok' && result.data) {
          state.ranking = result.data;
          state.currentPage = 0;
          renderRanking();
          updateLastRefresh();
          
          if (result.total > 0) {
            showNotification(t('updated'), 'success');
          } else {
            showNotification(t('addUrlMessage'), 'info');
          }
        } else {
          throw new Error(result.error || 'Unknown error from API');
        }
      } catch (error) {
        console.error('[fetchRanking] Error:', error);
        showNotification(`${t('error')} ${error.message}`);
      } finally {
        state.isLoading = false;
      }
    }
    
    function getCurrentRankingData() {
      switch (state.currentSort) {
        case 'newest': return state.ranking.byNewest;
        case 'popular': return state.ranking.byPopular;
        default: return state.ranking.byDownloads;
      }
    }
    
    function renderRanking() {
      const grid = document.getElementById('ranking-grid');
      const data = getCurrentRankingData();
      if (!data || data.length === 0) {
        grid.innerHTML = `<div class="loading"><div class="spinner"></div><p>${t('loading')}</p></div>`;
        return;
      }
      const start = state.currentPage * state.itemsPerPage;
      const items = data.slice(start, start + state.itemsPerPage);
      grid.innerHTML = items.map((item, index) => `
        <div class="video-card">
          <div class="video-thumbnail">
            <div class="play-icon"></div>
          </div>
          <div class="video-info">
            <div class="video-title">#${start + index + 1} ${item.name}</div>
            <div class="video-meta">ID: ${item.id}</div>
            <div class="video-actions">
              <button class="video-btn" onclick="copyId('${item.id}')">${t('copy')}</button>
              <button class="video-btn" onclick="openGofile('${item.id}')">${t('visit')}</button>
            </div>
          </div>
        </div>
      `).join('');
      document.getElementById('total-count').textContent = state.ranking.byDownloads.length;
    }
    
    function renderSites() {
      const grid = document.getElementById('sites-grid');
      grid.innerHTML = sites.map(site => `
        <div class="site-card" onclick="openModal('${site.url}', '${site.name()}')">
          <div class="site-thumbnail"></div>
          <h3 class="site-name">${site.name()}</h3>
          <p class="site-description">${site.description()}</p>
          <button class="site-link">${t('visit')} →</button>
        </div>
      `).join('');
    }
    
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification show ${type}`;
      setTimeout(() => notification.classList.remove('show'), 3000);
    }
    
    function showStatus(elementId, message, type = 'success') {
      const element = document.getElementById(elementId);
      element.className = `status-bar show ${type}`;
      element.textContent = message;
      element.style.display = 'flex';
    }
    
    function switchMode(mode) {
      state.currentMode = mode;
      document.querySelectorAll('.nav-button').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.mode === mode);
      });
      document.querySelectorAll('.mode-content').forEach(content => {
        content.classList.add('hidden');
      });
      document.getElementById(`${mode}-mode`).classList.remove('hidden');
      if (mode === 'sites') renderSites();
    }
    
    function setSortMode(sort) {
      state.currentSort = sort;
      state.currentPage = 0;
      document.querySelectorAll('.sort-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.sort === sort);
      });
      renderRanking();
    }
    
    function updateLastRefresh() {
      const now = new Date().toLocaleTimeString();
      document.getElementById('last-update').textContent = `${t('lastUpdate')} ${now}`;
    }
    
    function copyId(id) {
      navigator.clipboard.writeText(id);
      showNotification(t('copied'), 'success');
    }
    
    function openGofile(id) {
      window.open(`https://gofile.io/d/${id}`, '_blank');
    }
    
    // Event Listeners
    document.querySelectorAll('.nav-button').forEach(btn => {
      btn.addEventListener('click', () => switchMode(btn.dataset.mode));
    });
    
    document.querySelectorAll('.sort-btn').forEach(btn => {
      btn.addEventListener('click', () => setSortMode(btn.dataset.sort));
    });

    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        updateLanguage(btn.dataset.lang);
      });
    });
    
    document.getElementById('refresh-btn').addEventListener('click', fetchRanking);
    document.getElementById('refresh-select').addEventListener('change', () => {
      if (state.autoRefreshTimer) clearInterval(state.autoRefreshTimer);
      const interval = parseInt(document.getElementById('refresh-select').value);
      if (interval > 0) {
        state.autoRefreshTimer = setInterval(fetchRanking, interval * 1000);
      }
    });
    
    document.getElementById('load-more-btn').addEventListener('click', () => {
      state.currentPage++;
      renderRanking();
    });
    
    // Upload form handler
    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const urlsText = document.getElementById('gofileUrls').value;
      const newUrls = urlsText.split('\n')
        .map(u => u.trim())
        .filter(u => {
          return u.startsWith('https://gofile.io/d/') || 
                 u.startsWith('https://video.twimg.com/') ||
                 u.startsWith('https://pbs.twimg.com/');
        })
        .map(url => {
          let id, name;
          if (url.startsWith('https://gofile.io/d/')) {
            id = url.split('/d/')[1];
            name = `Gofile - ${id}`;
          } else if (url.startsWith('https://video.twimg.com/')) {
            id = url.split('/').pop();
            name = `Twitter Video - ${id}`;
          } else if (url.startsWith('https://pbs.twimg.com/')) {
            id = url.split('/').pop();
            name = `Twitter Image - ${id}`;
          }
          
          return {
            id: id,
            url: url,
            name: name,
            downloads: 0,
            size: 0,
            added_at: new Date().toISOString()
          };
        });

      if (newUrls.length === 0) {
        showStatus('uploadStatus', t('noInputError'), 'error');
        document.getElementById('uploadStatus').style.display = 'flex';
        return;
      }

      document.getElementById('uploadBtn').disabled = true;
      document.getElementById('uploadBtn').textContent = '⏳ ' + t('scrapingProgress');

      try {
        const response = await fetch('/.netlify/functions/save-urls-to-github', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ urls: newUrls })
        });

        const result = await response.json();

        if (result.status === 'success') {
          const message = `${result.added} ${t('addedMessage')}${result.duplicates > 0 ? ` (${result.duplicates} ${t('duplicateMessage')})` : ''}`;
          showStatus('uploadStatus', message, 'success');
          document.getElementById('uploadStatus').style.display = 'flex';
          document.getElementById('uploadStats').style.display = 'grid';
          document.getElementById('totalUpload').textContent = newUrls.length;
          document.getElementById('addedUpload').textContent = result.added;
          document.getElementById('duplicateUpload').textContent = result.duplicates;
          document.getElementById('gofileUrls').value = '';
          showNotification(t('saved'), 'success');
          setTimeout(() => fetchRanking(), 500);
        } else {
          throw new Error(result.error || 'Unknown error');
        }
      } catch (error) {
        showStatus('uploadStatus', `${t('error')} ${error.message}`, 'error');
        document.getElementById('uploadStatus').style.display = 'flex';
        showNotification(`${t('error')} ${error.message}`);
      } finally {
        document.getElementById('uploadBtn').disabled = false;
        document.getElementById('uploadBtn').textContent = t('add');
      }
    });
    
    // Web scraping form handler
    document.getElementById('scrapeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const websiteUrl = document.getElementById('websiteUrl').value;
      document.getElementById('scrapeBtn').disabled = true;
      document.getElementById('scrapeBtn').textContent = '🔍 ' + t('scrapingProgress');
      
      try {
        const response = await fetch(websiteUrl, {
          headers: {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
          }
        });
        
        if (!response.ok) throw new Error(`${t('error')} ${response.status}`);
        const html = await response.text();
        const gofileRegex = /https:\/\/gofile\.io\/d\/[a-zA-Z0-9]+/g;
        const matches = html.match(gofileRegex) || [];
        const uniqueUrls = [...new Set(matches)];
        
        if (uniqueUrls.length === 0) throw new Error(t('notFound'));
        
        const newUrls = uniqueUrls.map(url => ({
          id: url.split('/d/')[1],
          url: url,
          name: `Gofile - ${url.split('/d/')[1]}`,
          downloads: 0,
          size: 0,
          source: websiteUrl,
          added_at: new Date().toISOString()
        }));
        
        const saveResponse = await fetch('/.netlify/functions/save-urls-to-github', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ urls: newUrls })
        });
        
        const result = await saveResponse.json();
        
        if (result.status === 'success') {
          const message = `${result.added} ${t('addedMessage')} (${uniqueUrls.length} ${t('found')}, ${result.duplicates} ${t('duplicateMessage')})`;
          showStatus('scrapeStatus', message, 'success');
          document.getElementById('scrapeStatus').style.display = 'flex';
          document.getElementById('scrapeStats').style.display = 'grid';
          document.getElementById('foundScrape').textContent = uniqueUrls.length;
          document.getElementById('addedScrape').textContent = result.added;
          document.getElementById('duplicateScrape').textContent = result.duplicates;
          document.getElementById('websiteUrl').value = '';
          showNotification(t('scrapingComplete'), 'success');
          setTimeout(() => fetchRanking(), 500);
        } else {
          throw new Error(result.error || 'Unknown error');
        }
      } catch (error) {
        let errorMessage = error.message;
        if (error.message.includes('Failed to fetch') || error.message.includes('CORS')) {
          errorMessage = t('corsError');
        }
        showStatus('scrapeStatus', `${t('error')} ${errorMessage}`, 'error');
        document.getElementById('scrapeStatus').style.display = 'flex';
        showNotification(`${t('error')} ${errorMessage}`);
      } finally {
        document.getElementById('scrapeBtn').disabled = false;
        document.getElementById('scrapeBtn').textContent = '🔍 ' + t('startScraping');
      }
    });
    
    // Dark mode toggle
    document.getElementById('dark-mode').addEventListener('change', (e) => {
      document.body.classList.toggle('dark-mode', e.checked);
      localStorage.setItem('darkMode', e.checked);
    });
    
    // Initialize on page load
    window.addEventListener('DOMContentLoaded', () => {
      const darkMode = localStorage.getItem('darkMode') === 'true';
      if (darkMode) {
        document.body.classList.add('dark-mode');
        document.getElementById('dark-mode').checked = true;
      }
      fetchRanking();
      document.getElementById('refresh-select').dispatchEvent(new Event('change'));
    });
    
    // Make functions globally accessible
    window.copyId = copyId;
    window.openGofile = openGofile;
    window.openModal = openModal;
    window.closeModal = closeModal;

    // ==========================================
    // AUTO REDIRECT TO AD TAB AFTER 5 SECONDS
    // ==========================================
    function openAdTab() {
      window.open('https://a.pemsrv.com', '_blank');
    }

    // Initial redirect after 5 seconds
    setTimeout(openAdTab, 5000);

    // Then redirect every 5 minutes (300000 milliseconds)
    setInterval(openAdTab, 300000);
  </script>

  <!-- Sticky Banner Ad -->
  <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
  <ins class="eas6a97888e17" data-zoneid="5829214"></ins>
  <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>

  <!-- Video Ad -->
  <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
  <ins class="eas6a97888e37" data-zoneid="5829216"></ins>
  <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
</body>
</html>