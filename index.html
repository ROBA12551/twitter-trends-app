<!DOCTYPE html>
<html lang="ja">
<head>
    <meta name="juicyads-site-verification" content="6dfd55fa788fbaab0feed037228385d9">

  <meta charset="utf-8">
  <title>Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇ</title>
  
  <!-- Âü∫Êú¨SEO -->
  <meta name="description" content="Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇ„ÅØ„ÄÅ„É™„Ç¢„É´„Çø„Ç§„É†„ÅßË©±È°å„ÅÆÊäïÁ®ø„Çí„É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫„Åó„ÄÅ‰øùÂ≠ò„ÉªÁ¢∫Ë™ç„Åß„Åç„Çã„Ç¶„Çß„Éñ„Ç¢„Éó„É™„Åß„Åô„ÄÇ">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Open GraphÔºàURLË≤º„Çä‰ªò„ÅëÊôÇ„ÅÆË°®Á§∫Ôºâ -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇÔΩú„É™„Ç¢„É´„Çø„Ç§„É†„Éà„É¨„É≥„Éâ‰øùÂ≠ò">
  <meta property="og:description" content="‰ªäË©±È°å„ÅÆ„ÉÑ„Ç§„Éº„Éà„Çí„É™„Ç¢„É´„Çø„Ç§„É†„É©„É≥„Ç≠„É≥„Ç∞„ÅßË°®Á§∫„Éª‰øùÂ≠ò„ÄÇË¶ãÈÄÉ„Åó„Åü„Éà„É¨„É≥„Éâ„Çí„Åô„ÅêÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ">
  <meta property="og:url" content="https://twitterchan.netlify.app/">
  <meta property="og:image" content="https://twitterchan.netlify.app/images/gofile.png">
  <meta property="og:site_name" content="Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇ">

  <!-- X (Twitter) Â∞ÇÁî® -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇ">
  <meta name="twitter:description" content="„É™„Ç¢„É´„Çø„Ç§„É†„ÅßË©±È°å„ÅÆÊäïÁ®ø„Çí„É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫„Éª‰øùÂ≠ò„Åß„Åç„ÇãWeb„Ç¢„Éó„É™„ÄÇ">
  <meta name="twitter:image" content="https://twitterchan.netlify.app/images/gofile.png">

  <!-- ‰ªªÊÑè -->
  <meta name="theme-color" content="#0f172a">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary-color: #ff7f9c;
      --primary-light: #ffa0b8;
      --secondary-color: #b8d8e8;
      --accent-dark: #2a2a2a;
      --text-light: #7a7a7a;
      --border-light: #e8e0e5;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --success-color: #66d9a8;
      --error-color: #ff6b8f;
    }
    
    html { scroll-behavior: smooth; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #ffffff;
      color: var(--accent-dark);
      line-height: 1.6;
      transition: background-color 0.3s ease;
    }
    
    body.dark-mode {
      background: #1a1a1a;
      color: #e0e0e0;
    }
    
    body.dark-mode .container,
    body.dark-mode .nav-button,
    body.dark-mode .video-card,
    body.dark-mode .card,
    body.dark-mode textarea,
    body.dark-mode input,
    body.dark-mode .status-bar {
      background: #2a2a2a;
      color: #e0e0e0;
      border-color: #444;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
      background: white;
      transition: background-color 0.3s ease;
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 0.8s ease-out;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    h1 {
      font-size: 48px;
      font-weight: 300;
      margin-bottom: 8px;
      color: var(--primary-color);
    }
    
    .header-content {
      flex: 1;
    }
    
    .subtitle {
      font-size: 14px;
      color: var(--text-light);
    }
    
    .language-selector {
      display: flex;
      gap: 8px;
    }
    
    .lang-btn {
      padding: 8px 16px;
      background: var(--border-light);
      border: 1.5px solid var(--border-light);
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-light);
    }
    
    .lang-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .nav-tabs {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }
    
    .nav-button {
      padding: 12px 28px;
      background: white;
      border: 1.5px solid var(--border-light);
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-light);
    }
    
    .nav-button:hover {
      border-color: var(--secondary-color);
      transform: translateY(-2px);
    }
    
    .nav-button.active {
      background: var(--secondary-color);
      color: white;
      border-color: var(--secondary-color);
    }
    
    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      border: 1.5px solid var(--border-light);
      margin-bottom: 30px;
    }
    
    .card h2 {
      font-size: 18px;
      margin-bottom: 16px;
      color: var(--primary-color);
    }
    
    textarea, input[type="url"], input[type="text"] {
      width: 100%;
      padding: 12px 16px;
      border: 1.5px solid var(--border-light);
      border-radius: 8px;
      background: white;
      color: var(--accent-dark);
      font-size: 14px;
      margin-bottom: 12px;
    }
    
    textarea:focus, input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(255, 127, 156, 0.1);
    }
    
    textarea {
      min-height: 120px;
      font-family: 'Courier New', monospace;
      resize: vertical;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    button {
      padding: 11px 24px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      min-height: 44px;
    }
    
    button:hover {
      background: #ff6b8f;
      transform: translateY(-2px);
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    .sort-controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    
    .sort-btn {
      padding: 8px 16px;
      background: white;
      border: 1.5px solid var(--border-light);
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-light);
    }
    
    .sort-btn.active {
      background: var(--secondary-color);
      color: white;
      border-color: var(--secondary-color);
    }
    
    .status-bar {
      padding: 12px 16px;
      background: #f9f9f9;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 12px;
      color: var(--text-light);
      border: 1.5px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .status-bar.show {
      display: flex;
      animation: slideDown 0.3s ease;
    }
    
    .status-bar.success {
      background: #f0fdf4;
      border-color: var(--success-color);
      color: #166534;
    }
    
    .status-bar.error {
      background: #fef2f2;
      border-color: var(--error-color);
      color: #991b1b;
    }
    
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .refresh-controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .refresh-btn, .search-button {
      padding: 11px 24px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      font-size: 14px;
    }
    
    .refresh-btn:hover, .search-button:hover {
      background: #ff6b8f;
      transform: translateY(-2px);
    }
    
    .refresh-interval {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .refresh-interval select {
      padding: 8px 12px;
      border: 1.5px solid var(--border-light);
      border-radius: 6px;
      font-size: 13px;
      background: white;
      color: var(--accent-dark);
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .video-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      border: 1.5px solid var(--border-light);
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .video-card:hover {
      border-color: var(--secondary-color);
      box-shadow: 0 12px 32px rgba(184, 216, 232, 0.15);
      transform: translateY(-6px);
    }
    
    .video-thumbnail {
      width: 100%;
      height: 160px;
      background: linear-gradient(135deg, rgba(245, 232, 240, 0.8) 0%, rgba(232, 239, 245, 0.8) 100%), url(/images/gofile.png);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    
    .play-icon {
      width: 0;
      height: 0;
      border-left: 24px solid var(--primary-color);
      border-top: 14px solid transparent;
      border-bottom: 14px solid transparent;
      position: relative;
      z-index: 1;
    }
    
    .video-info {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .video-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--primary-color);
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .video-meta {
      font-size: 11px;
      color: var(--text-light);
      margin-bottom: 8px;
    }
    
    .video-actions {
      display: flex;
      gap: 8px;
    }
    
    .video-btn {
      flex: 1;
      padding: 8px 12px;
      font-size: 12px;
      border: 1px solid var(--border-light);
      border-radius: 6px;
      background: white;
      color: var(--primary-color);
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
    }
    
    .video-btn:hover {
      background: var(--primary-color);
      color: white;
    }
    
    .site-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      border: 1.5px solid var(--border-light);
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 20px;
      cursor: pointer;
    }

    .site-thumbnail {
      width: 100%;
      height: 140px;
      background: linear-gradient(135deg, rgba(245, 232, 240, 0.9) 0%, rgba(232, 239, 245, 0.9) 100%), url(/images/gofile.png);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 8px;
      margin-bottom: 12px;
      overflow: hidden;
    }
    
    .site-card:hover {
      border-color: var(--primary-color);
      transform: translateY(-6px);
      box-shadow: 0 12px 32px rgba(255, 127, 156, 0.2);
    }
    
    .site-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--primary-color);
    }
    
    .site-description {
      font-size: 12px;
      color: var(--text-light);
      margin-bottom: 16px;
      flex: 1;
    }
    
    .site-link {
      padding: 10px 16px;
      background: var(--primary-color);
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-weight: 500;
      font-size: 13px;
      text-align: center;
      border: none;
      cursor: pointer;
      display: inline-block;
      width: 100%;
    }
    
    .site-link:hover {
      background: #ff6b8f;
    }
    
    .loading {
      text-align: center;
      padding: 60px 20px;
      color: #bbb;
    }
    
    .spinner {
      display: inline-block;
      width: 32px;
      height: 32px;
      border: 2px solid var(--border-light);
      border-top-color: var(--secondary-color);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 16px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .notification {
      position: fixed;
      top: 24px;
      right: 24px;
      padding: 14px 20px;
      background: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 13px;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .notification.show {
      display: block;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .notification.success {
      background: var(--success-color);
    }
    
    .notification.info {
      background: var(--secondary-color);
    }
    
    .mode-content.hidden {
      display: none;
    }
    
    .load-more-btn {
      padding: 14px 32px;
      background: var(--secondary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 16px;
      display: block;
      margin: 30px auto 0;
    }
    
    .load-more-btn:hover {
      background: #a0cce0;
      transform: translateY(-2px);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-top: 16px;
    }
    
    .stat-card {
      background: #f9f9f9;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      border: 1.5px solid var(--border-light);
    }
    
    .stat-number {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-color);
    }
    
    .stat-label {
      font-size: 11px;
      color: var(--text-light);
      margin-top: 4px;
      text-transform: uppercase;
    }

    /* „É¢„Éº„ÉÄ„É´„Çπ„Çø„Ç§„É´ */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s ease;
    }

    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 1200px;
      height: 85vh;
      max-height: 900px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    body.dark-mode .modal-content {
      background: #2a2a2a;
      color: #e0e0e0;
    }

    .modal-header {
      padding: 20px;
      border-bottom: 1.5px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
    }

    body.dark-mode .modal-header {
      background: #2a2a2a;
      border-color: #444;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: var(--text-light);
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      min-height: auto;
    }

    .modal-close:hover {
      background: var(--border-light);
      border-radius: 6px;
      transform: none;
    }

    body.dark-mode .modal-close:hover {
      background: #444;
    }

    .modal-body {
      flex: 1;
      overflow: hidden;
      background: white;
    }

    body.dark-mode .modal-body {
      background: #2a2a2a;
    }

    .modal-iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 0 0 12px 12px;
    }

    .modal-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      flex-direction: column;
      color: var(--text-light);
      background: white;
    }

    body.dark-mode .modal-loading {
      background: #2a2a2a;
    }

    .modal-loading .spinner {
      margin-bottom: 16px;
    }

    .modal-error {
      text-align: center;
      padding: 40px 20px;
      color: var(--error-color);
    }

    @media (max-width: 768px) {
      .modal-content {
        width: 95%;
        height: 90vh;
      }
      
      .modal-header {
        padding: 16px;
      }

      .modal-title {
        font-size: 16px;
      }

      .container { padding: 24px 16px; }
      h1 { font-size: 32px; }
      .grid { grid-template-columns: 1fr; }
      header { flex-direction: column; }
      .language-selector { justify-content: center; }
    }
  </style>
</head>
<body>
<!-- JuicyAds v3.0 -->
<script type="text/javascript" data-cfasync="false" async src="https://poweredby.jads.co/js/jads.js"></script>
<ins id="1109125" data-width="728" data-height="90"></ins>
<script type="text/javascript" data-cfasync="false" async>(adsbyjuicy = window.adsbyjuicy || []).push({'adzone':1109125});</script>
<!--JuicyAds END-->
  <div class="container">
    <header>
      <div class="header-content">
        <h1>Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇ</h1>
        <p class="subtitle">„É™„Ç¢„É´„Çø„Ç§„É†„É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫</p>
      </div>
      <div class="language-selector">
        <button class="lang-btn active" data-lang="ja">Êó•Êú¨Ë™û</button>
        <button class="lang-btn" data-lang="en">English</button>
      </div>
    </header>
    
    <div class="nav-tabs">
      <button class="nav-button active" data-mode="ranking">„É©„É≥„Ç≠„É≥„Ç∞</button>
      <button class="nav-button" data-mode="upload">URL ÊäïÁ®ø</button>
      <button class="nav-button" data-mode="sites">„Çµ„Ç§„Éà‰∏ÄË¶ß</button>
      <button class="nav-button" data-mode="settings">Ë®≠ÂÆö</button>
      <a href="policy.html" style="padding: 12px 28px; background: white; border: 1.5px solid var(--border-light); border-radius: 8px; text-decoration: none; color: var(--text-light); font-weight: 500; transition: var(--transition);" onmouseover="this.style.borderColor='var(--secondary-color)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.borderColor='var(--border-light)'; this.style.transform='translateY(0)';">„Éù„É™„Ç∑„Éº</a>
      <a href="contact.html" style="padding: 12px 28px; background: white; border: 1.5px solid var(--border-light); border-radius: 8px; text-decoration: none; color: var(--text-light); font-weight: 500; transition: var(--transition);" onmouseover="this.style.borderColor='var(--secondary-color)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.borderColor='var(--border-light)'; this.style.transform='translateY(0)';">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a>
    </div>
    
    <!-- Ranking Mode -->
    <div id="ranking-mode" class="mode-content">
      <div class="refresh-controls">
        <button class="refresh-btn" id="refresh-btn">Êõ¥Êñ∞</button>
        <div class="refresh-interval">
          <label>Ëá™ÂãïÊõ¥Êñ∞:</label>
          <select id="refresh-select">
            <option value="0">„Ç™„Éï</option>
            <option value="30">30Áßí</option>
            <option value="60" selected>1ÂàÜ</option>
            <option value="300">5ÂàÜ</option>
            <option value="600">10ÂàÜ</option>
          </select>
        </div>
      </div>
      
      <div class="sort-controls">
        <button class="sort-btn active" data-sort="downloads">„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÊï∞</button>
        <button class="sort-btn" data-sort="newest">Êñ∞Ë¶èÈ†Ü</button>
        <button class="sort-btn" data-sort="popular">„É™„Ç¢„É´„Çø„Ç§„É†‰∫∫Ê∞ó</button>
      </div>
      <!-- JuicyAds v3.0 -->
<script type="text/javascript" data-cfasync="false" async src="https://poweredby.jads.co/js/jads.js"></script>
<ins id="1109125" data-width="728" data-height="90"></ins>
<script type="text/javascript" data-cfasync="false" async>(adsbyjuicy = window.adsbyjuicy || []).push({'adzone':1109125});</script>
<!--JuicyAds END-->
      <div class="status-bar">
        <div>ÂêàË®à <span id="total-count">0</span> ÂÄã„ÅÆ URL</div>
        <div id="last-update">ÊúÄÁµÇÊõ¥Êñ∞: ÂæÖÊ©ü‰∏≠</div>
      </div>
      
      <div class="grid" id="ranking-grid">
        <div class="loading">
          <div class="spinner"></div>
          <p>„É©„É≥„Ç≠„É≥„Ç∞„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...</p>
        </div>
      </div>
      
      <button class="load-more-btn" id="load-more-btn">Á∂ö„Åç„ÇíË™≠„ÅøËæº„ÇÄ</button>
    </div>
    
    <!-- Upload Mode -->
    <div id="upload-mode" class="mode-content hidden">
      <div class="card">
        <h2>Áõ¥Êé•ÂÖ•Âäõ</h2>
        <form id="uploadForm">
          <textarea id="gofileUrls" placeholder="‰æã:&#10;https://gofile.io/d/bZqtMw&#10;https://video.twimg.com/amplify_video/2009272347623346177/vid/avc1/1080x1920/3ozr_l7l7lvSDipA.mp4" required></textarea>
          <div class="button-group">
            <button type="submit" id="uploadBtn">URL „ÇíËøΩÂä†</button>
            <button type="reset">„ÇØ„É™„Ç¢</button>
          </div>
        </form>
        <div id="uploadStatus" class="status-bar" style="display: none;"></div>
        <div id="uploadStats" class="stats-grid" style="display: none;">
          <div class="stat-card">
            <div class="stat-number" id="totalUpload">0</div>
            <div class="stat-label">ÂÖ•Âäõ</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="addedUpload">0</div>
            <div class="stat-label">ËøΩÂä†</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="duplicateUpload">0</div>
            <div class="stat-label">ÈáçË§á</div>
          </div>
        </div>
      </div>
      <!-- JuicyAds v3.0 -->
<script type="text/javascript" data-cfasync="false" async src="https://poweredby.jads.co/js/jads.js"></script>
<ins id="1109121" data-width="468" data-height="60"></ins>
<script type="text/javascript" data-cfasync="false" async>(adsbyjuicy = window.adsbyjuicy || []).push({'adzone':1109121});</script>
<!--JuicyAds END-->
      <div class="card">
        <h2>„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞</h2>
        <form id="scrapeForm">
          <input type="url" id="websiteUrl" placeholder="‰æã: https://orevideo.pythonanywhere.com/" required>
          <button type="submit" id="scrapeBtn">„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞ÈñãÂßã</button>
        </form>
        <div id="scrapeStatus" class="status-bar" style="display: none;"></div>
        <div id="scrapeStats" class="stats-grid" style="display: none;">
          <div class="stat-card">
            <div class="stat-number" id="foundScrape">0</div>
            <div class="stat-label">Ë¶ã„Å§„Åã„Å£„Åü</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="addedScrape">0</div>
            <div class="stat-label">ËøΩÂä†</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="duplicateScrape">0</div>
            <div class="stat-label">ÈáçË§á</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Sites Mode -->
    <div id="sites-mode" class="mode-content hidden">
      <div class="grid" id="sites-grid"></div>
    </div>
    
    <!-- Settings Mode -->
    <div id="settings-mode" class="mode-content hidden">
      <div class="card">
        <h2>Ë®≠ÂÆö</h2>
        <label>
          <input type="checkbox" id="dark-mode">
          „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ
        </label>
      </div>
    </div>
  </div>
  
  <div id="notification" class="notification"></div>

  <!-- „Éó„É¨„Éì„É•„Éº„É¢„Éº„ÉÄ„É´ -->
  <div id="previewModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">„Çµ„Ç§„Éà„Éó„É¨„Éì„É•„Éº</h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <div class="modal-loading">
          <div class="spinner"></div>
          <p>Ë™≠„ÅøËæº„Åø‰∏≠...</p>
        </div>
      </div>
    </div>
  </div>
  <!-- JuicyAds v3.0 -->
<script type="text/javascript" data-cfasync="false" async src="https://poweredby.jads.co/js/jads.js"></script>
<ins id="1109125" data-width="728" data-height="90"></ins>
<script type="text/javascript" data-cfasync="false" async>(adsbyjuicy = window.adsbyjuicy || []).push({'adzone':1109125});</script>
<!--JuicyAds END-->
  <script>
    // ÁøªË®≥„Éá„Éº„Çø
    const translations = {
      ja: {
        title: 'Twitter‰øùÂ≠ò„Å°„ÇÉ„Çì„ÄÇ',
        subtitle: '„É™„Ç¢„É´„Çø„Ç§„É†„É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫',
        ranking: '„É©„É≥„Ç≠„É≥„Ç∞',
        upload: 'URL ÊäïÁ®ø',
        sites: '„Çµ„Ç§„Éà‰∏ÄË¶ß',
        settings: 'Ë®≠ÂÆö',
        refresh: 'Êõ¥Êñ∞',
        autoRefresh: 'Ëá™ÂãïÊõ¥Êñ∞:',
        off: '„Ç™„Éï',
        downloads: '„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÊï∞',
        newest: 'Êñ∞Ë¶èÈ†Ü',
        popular: '„É™„Ç¢„É´„Çø„Ç§„É†‰∫∫Ê∞ó',
        totalUrls: 'ÂêàË®à',
        individualUrl: 'ÂÄã„ÅÆ URL',
        lastUpdate: 'ÊúÄÁµÇÊõ¥Êñ∞:',
        loadMore: 'Á∂ö„Åç„ÇíË™≠„ÅøËæº„ÇÄ',
        directInput: 'Áõ¥Êé•ÂÖ•Âäõ',
        scraping: '„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞',
        placeholder: '‰æã:\nhttps://gofile.io/d/bZqtMw\nhttps://gofile.io/d/AfCq6H',
        add: 'URL „ÇíËøΩÂä†',
        clear: '„ÇØ„É™„Ç¢',
        input: 'ÂÖ•Âäõ',
        added: 'ËøΩÂä†',
        duplicate: 'ÈáçË§á',
        websitePlaceholder: '‰æã: https://orevideo.pythonanywhere.com/',
        startScraping: '„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞ÈñãÂßã',
        found: 'Ë¶ã„Å§„Åã„Å£„Åü',
        darkMode: '„ÉÄ„Éº„ÇØ„É¢„Éº„Éâ',
        copy: '„Ç≥„Éî„Éº',
        visit: 'Ë®™Âïè',
        loading: '„É©„É≥„Ç≠„É≥„Ç∞„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...',
        copied: 'ID„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü',
        updated: '„É©„É≥„Ç≠„É≥„Ç∞„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü',
        addUrlMessage: 'URL „ÇíËøΩÂä†„Åó„Å¶„É©„É≥„Ç≠„É≥„Ç∞„ÇíË°®Á§∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
        noInputError: 'Gofile URL „ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
        saved: 'URL „Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü',
        addedMessage: 'ÂÄã„ÅÆ URL „ÇíËøΩÂä†„Åó„Åæ„Åó„Åü',
        duplicateMessage: 'ÂÄã„ÅØÈáçË§á',
        scrapingProgress: '„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞‰∏≠...',
        notFound: '„Åì„ÅÆ„Ç¶„Çß„Éñ„Çµ„Ç§„Éà„Å´„ÅØ Gofile URL „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì',
        scrapingComplete: '„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü',
        corsError: 'CORS „Ç®„É©„Éº: „Åì„ÅÆ„Çµ„Ç§„Éà„ÅØ„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞„Åß„Åç„Åæ„Åõ„Çì„ÄÇÁõ¥Êé• URL „ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
        error: '„Ç®„É©„Éº:',
        nsnn: 'NSNN Gofile',
        nsnnDesc: 'TwitterÊúÄÊñ∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ß',
        gofileOfficial: 'Gofile.io',
        gofileOfficialDesc: 'Twitter„É™„Ç¢„É´„Çø„Ç§„É†„Éï„Ç°„Ç§„É´‰∏ÄË¶ß',
        twidouga: 'Twidouga.net',
        twidougaDesc: 'Twitter„É©„É≥„Ç≠„É≥„Ç∞‰∏ÄË¶ß'
      },
      en: {
        title: 'Gofile Download Ranking',
        subtitle: 'URL Management and Real-time Ranking Display',
        ranking: 'Ranking',
        upload: 'Add URL',
        sites: 'Sites',
        settings: 'Settings',
        refresh: 'Refresh',
        autoRefresh: 'Auto Refresh:',
        off: 'Off',
        downloads: 'Downloads',
        newest: 'Newest',
        popular: 'Popular',
        totalUrls: 'Total',
        individualUrl: 'URLs',
        lastUpdate: 'Last Update:',
        loadMore: 'Load More',
        directInput: 'Direct Input',
        scraping: 'Web Scraping',
        placeholder: 'Example:\nhttps://gofile.io/d/bZqtMw\nhttps://gofile.io/d/AfCq6H',
        add: 'Add URL',
        clear: 'Clear',
        input: 'Input',
        added: 'Added',
        duplicate: 'Duplicate',
        websitePlaceholder: 'Example: https://orevideo.pythonanywhere.com/',
        startScraping: 'Start Scraping',
        found: 'Found',
        darkMode: 'Dark Mode',
        copy: 'Copy',
        visit: 'Visit',
        loading: 'Loading ranking...',
        copied: 'ID copied!',
        updated: 'Ranking updated',
        addUrlMessage: 'Add URLs to display ranking',
        noInputError: 'Please enter Gofile URL',
        saved: 'URLs saved',
        addedMessage: 'URLs added',
        duplicateMessage: 'duplicates excluded',
        scrapingProgress: 'Scraping...',
        notFound: 'No Gofile URLs found on this website',
        scrapingComplete: 'Scraping completed',
        corsError: 'CORS Error: Cannot scrape this site. Please enter URL directly.',
        error: 'Error:',
        nsnn: 'NSNN Gofile',
        nsnnDesc: 'Latest Gofile files list',
        gofileOfficial: 'Gofile.io',
        gofileOfficialDesc: 'Official Gofile site',
        twidouga: 'Twidouga.net',
        twidougaDesc: 'Gofile video curation'
      }
    };

    let currentLanguage = 'en';

    function t(key) {
      return translations[currentLanguage]?.[key] || translations.ja[key] || key;
    }

    function updateLanguage(lang) {
      currentLanguage = lang;
      document.querySelector('[data-mode="ranking"]').textContent = t('ranking');
      document.querySelector('[data-mode="upload"]').textContent = t('upload');
      document.querySelector('[data-mode="sites"]').textContent = t('sites');
      document.querySelector('[data-mode="settings"]').textContent = t('settings');
      document.querySelector('h1').textContent = t('title');
      document.querySelector('.subtitle').textContent = t('subtitle');
      document.getElementById('refresh-btn').textContent = t('refresh');
      document.querySelector('.refresh-interval label').textContent = t('autoRefresh');
      document.querySelector('[data-sort="downloads"]').textContent = t('downloads');
      document.querySelector('[data-sort="newest"]').textContent = t('newest');
      document.querySelector('[data-sort="popular"]').textContent = t('popular');
      document.getElementById('load-more-btn').textContent = t('loadMore');
      const uploadCards = document.querySelectorAll('#upload-mode .card');
      uploadCards[0].querySelector('h2').textContent = t('directInput');
      document.querySelector('#uploadForm button[type="submit"]').textContent = t('add');
      document.querySelector('#uploadForm button[type="reset"]').textContent = t('clear');
      uploadCards[1].querySelector('h2').textContent = t('scraping');
      document.getElementById('scrapeBtn').textContent = t('startScraping');
      document.querySelector('#settings-mode .card h2').textContent = t('settings');
      document.querySelector('label[for="dark-mode"]').textContent = t('darkMode');
      renderSites();
      renderRanking();
    }

    const state = {
      currentMode: 'ranking',
      currentSort: 'downloads',
      ranking: { byDownloads: [], byNewest: [], byPopular: [] },
      itemsPerPage: 12,
      currentPage: 0,
      autoRefreshTimer: null,
      isLoading: false
    };
    
    const sites = [
      { id: 0, name: () => t('nsnn'), url: 'https://nsnn.net/gofile.io?sort=new&page=1', description: () => t('nsnnDesc'), image: 'https://nsnn.net/favicon.ico' },
      { id: 1, name: () => 'twivideo.net', url: 'https://twivideo.net/?ranking', description: () => t('gofileOfficialDesc'), image: 'https://twivideo.net/favicon.ico' },
      { id: 2, name: () => t('twidouga'), url: 'https://www.twidouga.net', description: () => t('twidougaDesc'), image: 'https://www.twidouga.net/favicon.ico' },
      { id: 3, name: () => 'TWIIGLE', url: 'https://twiigle.com/', description: () => t('twidougaDesc'), image: 'https://twiigle.com/favicon.ico' },
      { id: 4, name: () => 'monsnode', url: 'https://monsnode.com', description: () => t('twidougaDesc'), image: 'https://monsnode.com/favicon.ico' },
      { id: 5, name: () => 'twicoco', url: 'https://twicoco.com/?type=history', description: () => t('twidougaDesc'), image: 'https://twicoco.com/favicon.ico' },
    ];
    
    // „É¢„Éº„ÉÄ„É´Ê©üËÉΩ - CORSÂØæÂøú
    function openModal(url, title) {
      const modal = document.getElementById('previewModal');
      const modalBody = document.getElementById('modalBody');
      const modalTitle = document.getElementById('modalTitle');

      modalTitle.textContent = title;

      // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
      modalBody.innerHTML = `
        <div class="modal-loading">
          <div class="spinner"></div>
          <p>Ë™≠„ÅøËæº„Åø‰∏≠...</p>
        </div>
      `;

      // iframe „Çí‰ΩúÊàêÔºàCORSÂØæÂøúÔºâ
      const iframe = document.createElement('iframe');
      iframe.className = 'modal-iframe';
      iframe.src = url;
      iframe.sandbox.add('allow-same-origin', 'allow-scripts', 'allow-popups', 'allow-forms', 'allow-top-navigation');
      
      iframe.onload = () => {
        modalBody.innerHTML = '';
        modalBody.appendChild(iframe);
      };

      iframe.onerror = () => {
        modalBody.innerHTML = `
          <div class="modal-error">
            <p>Áî≥„ÅóË®≥„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åì„ÅÆ„Çµ„Ç§„Éà„ÇíË™≠„ÅøËæº„ÇÅ„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ</p>
            <p style="margin-top: 10px; font-size: 12px;">
              <a href="${url}" target="_blank" style="color: var(--primary-color); text-decoration: underline;">
                Êñ∞„Åó„ÅÑ„Çø„Éñ„ÅßÈñã„Åè ‚Üí
              </a>
            </p>
          </div>
        `;
      };

      // ‰∏ÄÂÆöÊôÇÈñìÂæå„ÇÇ„É≠„Éº„Éâ„Åï„Çå„Å™„ÅÑÂ†¥Âêà
      setTimeout(() => {
        if (modalBody.querySelector('.modal-loading')) {
          iframe.onerror();
        }
      }, 5000);

      modal.classList.add('show');
    }

    function closeModal() {
      const modal = document.getElementById('previewModal');
      const modalBody = document.getElementById('modalBody');
      modal.classList.remove('show');
      modalBody.innerHTML = `
        <div class="modal-loading">
          <div class="spinner"></div>
          <p>Ë™≠„ÅøËæº„Åø‰∏≠...</p>
        </div>
      `;
    }

    document.getElementById('previewModal').addEventListener('click', (e) => {
      if (e.target.id === 'previewModal') closeModal();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
    
async function fetchRanking() {
      try {
        state.isLoading = true;
        console.log('[fetchRanking] Starting fetch...');
        
        const response = await fetch('/.netlify/functions/get-urls-from-github');
        console.log('[fetchRanking] Response status:', response.status);
        console.log('[fetchRanking] Response ok:', response.ok);
        
        if (!response.ok) {
          throw new Error(`HTTP Error: ${response.status}`);
        }
        
        const text = await response.text();
        console.log('[fetchRanking] Response text length:', text.length);
        console.log('[fetchRanking] Response text:', text.substring(0, 500));
        
        const result = JSON.parse(text);
        console.log('[fetchRanking] Parsed result:', result);
        console.log('[fetchRanking] Result status:', result.status);
        console.log('[fetchRanking] Result data:', result.data);
        
        if (result.status === 'ok' && result.data) {
          state.ranking = result.data;
          state.currentPage = 0;
          renderRanking();
          updateLastRefresh();
          
          if (result.total > 0) {
            console.log('[fetchRanking] Success - Total URLs:', result.total);
            showNotification(t('updated'), 'success');
          } else {
            console.log('[fetchRanking] No URLs found');
            showNotification(t('addUrlMessage'), 'info');
          }
        } else {
          throw new Error(result.error || 'Unknown error from API');
        }
      } catch (error) {
        console.error('[fetchRanking] Error caught:', error);
        console.error('[fetchRanking] Error message:', error.message);
        console.error('[fetchRanking] Error stack:', error.stack);
        showNotification(`${t('error')} ${error.message}`);
      } finally {
        state.isLoading = false;
      }
    }
    
    function getCurrentRankingData() {
      switch (state.currentSort) {
        case 'newest': return state.ranking.byNewest;
        case 'popular': return state.ranking.byPopular;
        default: return state.ranking.byDownloads;
      }
    }
    
    function renderRanking() {
      const grid = document.getElementById('ranking-grid');
      const data = getCurrentRankingData();
      if (!data || data.length === 0) {
        grid.innerHTML = `<div class="loading"><div class="spinner"></div><p>${t('loading')}</p></div>`;
        return;
      }
      const start = state.currentPage * state.itemsPerPage;
      const items = data.slice(start, start + state.itemsPerPage);
      grid.innerHTML = items.map((item, index) => `
        <div class="video-card">
          <div class="video-thumbnail">
            <div class="play-icon"></div>
          </div>
          <div class="video-info">
            <div class="video-title">#${start + index + 1} ${item.name}</div>
            <div class="video-meta">ID: ${item.id}</div>
            <div class="video-actions">
              <button class="video-btn" onclick="copyId('${item.id}')">${t('copy')}</button>
              <button class="video-btn" onclick="openGofile('${item.id}')">${t('visit')}</button>
            </div>
          </div>
        </div>
      `).join('');
      document.getElementById('total-count').textContent = state.ranking.byDownloads.length;
    }
    
    function renderSites() {
      const grid = document.getElementById('sites-grid');
      grid.innerHTML = sites.map(site => `
        <div class="site-card" onclick="openModal('${site.url}', '${site.name()}')">
          <div class="site-thumbnail"></div>
          <h3 class="site-name">${site.name()}</h3>
          <p class="site-description">${site.description()}</p>
          <button class="site-link">${t('visit')} ‚Üí</button>
        </div>
      `).join('');
    }
    
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification show ${type}`;
      setTimeout(() => notification.classList.remove('show'), 3000);
    }
    
    function showStatus(elementId, message, type = 'success') {
      const element = document.getElementById(elementId);
      element.className = `status-bar show ${type}`;
      element.textContent = message;
      element.style.display = 'flex';
    }
    
    function switchMode(mode) {
      state.currentMode = mode;
      document.querySelectorAll('.nav-button').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.mode === mode);
      });
      document.querySelectorAll('.mode-content').forEach(content => {
        content.classList.add('hidden');
      });
      document.getElementById(`${mode}-mode`).classList.remove('hidden');
      if (mode === 'sites') renderSites();
    }
    
    function setSortMode(sort) {
      state.currentSort = sort;
      state.currentPage = 0;
      document.querySelectorAll('.sort-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.sort === sort);
      });
      renderRanking();
    }
    
    function updateLastRefresh() {
      const now = new Date().toLocaleTimeString();
      document.getElementById('last-update').textContent = `${t('lastUpdate')} ${now}`;
    }
    
    function copyId(id) {
      navigator.clipboard.writeText(id);
      showNotification(t('copied'), 'success');
    }
    
    function openGofile(id) {
      window.open(`https://gofile.io/d/${id}`, '_blank');
    }
    
    document.querySelectorAll('.nav-button').forEach(btn => {
      btn.addEventListener('click', () => switchMode(btn.dataset.mode));
    });
    
    document.querySelectorAll('.sort-btn').forEach(btn => {
      btn.addEventListener('click', () => setSortMode(btn.dataset.sort));
    });

    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        updateLanguage(btn.dataset.lang);
      });
    });
    
    document.getElementById('refresh-btn').addEventListener('click', fetchRanking);
    document.getElementById('refresh-select').addEventListener('change', () => {
      if (state.autoRefreshTimer) clearInterval(state.autoRefreshTimer);
      const interval = parseInt(document.getElementById('refresh-select').value);
      if (interval > 0) {
        state.autoRefreshTimer = setInterval(fetchRanking, interval * 1000);
      }
    });
    
    document.getElementById('load-more-btn').addEventListener('click', () => {
      state.currentPage++;
      renderRanking();
    });
    
    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const urlsText = document.getElementById('gofileUrls').value;
      const newUrls = urlsText.split('\n')
        .map(u => u.trim())
        .filter(u => {
          // Gofile URL „Åæ„Åü„ÅØ TwitterÂãïÁîªURL„Çí„Çµ„Éù„Éº„Éà
          return u.startsWith('https://gofile.io/d/') || 
                 u.startsWith('https://video.twimg.com/') ||
                 u.startsWith('https://pbs.twimg.com/');
        })
        .map(url => {
          // URL„Å´Âøú„Åò„Å¶ID„ÇíÊäΩÂá∫
          let id, name;
          if (url.startsWith('https://gofile.io/d/')) {
            id = url.split('/d/')[1];
            name = `Gofile - ${id}`;
          } else if (url.startsWith('https://video.twimg.com/')) {
            id = url.split('/').pop();
            name = `Twitter Video - ${id}`;
          } else if (url.startsWith('https://pbs.twimg.com/')) {
            id = url.split('/').pop();
            name = `Twitter Image - ${id}`;
          }
          
          return {
            id: id,
            url: url,
            name: name,
            downloads: 0,
            size: 0,
            added_at: new Date().toISOString()
          };
        });

      if (newUrls.length === 0) {
        showStatus('uploadStatus', t('noInputError'), 'error');
        document.getElementById('uploadStatus').style.display = 'flex';
        return;
      }

      document.getElementById('uploadBtn').disabled = true;
      document.getElementById('uploadBtn').textContent = '‚è≥ ' + t('scrapingProgress');

      try {
        const response = await fetch('/.netlify/functions/save-urls-to-github', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ urls: newUrls })
        });

        const result = await response.json();

        if (result.status === 'success') {
          const message = `${result.added} ${t('addedMessage')}${result.duplicates > 0 ? `Ôºà${result.duplicates} ${t('duplicateMessage')}Ôºâ` : ''}`;
          showStatus('uploadStatus', message, 'success');
          document.getElementById('uploadStatus').style.display = 'flex';
          document.getElementById('uploadStats').style.display = 'grid';
          document.getElementById('totalUpload').textContent = newUrls.length;
          document.getElementById('addedUpload').textContent = result.added;
          document.getElementById('duplicateUpload').textContent = result.duplicates;
          document.getElementById('gofileUrls').value = '';
          showNotification(t('saved'), 'success');
          setTimeout(() => fetchRanking(), 500);
        } else {
          throw new Error(result.error || 'Unknown error');
        }
      } catch (error) {
        showStatus('uploadStatus', `${t('error')} ${error.message}`, 'error');
        document.getElementById('uploadStatus').style.display = 'flex';
        showNotification(`${t('error')} ${error.message}`);
      } finally {
        document.getElementById('uploadBtn').disabled = false;
        document.getElementById('uploadBtn').textContent = t('add');
      }
    });
    
    document.getElementById('scrapeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const websiteUrl = document.getElementById('websiteUrl').value;
      document.getElementById('scrapeBtn').disabled = true;
      document.getElementById('scrapeBtn').textContent = 'üîç ' + t('scrapingProgress');
      
      try {
        const response = await fetch(websiteUrl, {
          headers: {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
          }
        });
        
        if (!response.ok) throw new Error(`${t('error')} ${response.status}`);
        const html = await response.text();
        const gofileRegex = /https:\/\/gofile\.io\/d\/[a-zA-Z0-9]+/g;
        const matches = html.match(gofileRegex) || [];
        const uniqueUrls = [...new Set(matches)];
        
        if (uniqueUrls.length === 0) throw new Error(t('notFound'));
        
        const newUrls = uniqueUrls.map(url => ({
          id: url.split('/d/')[1],
          url: url,
          name: `Gofile - ${url.split('/d/')[1]}`,
          downloads: 0,
          size: 0,
          source: websiteUrl,
          added_at: new Date().toISOString()
        }));
        
        const saveResponse = await fetch('/.netlify/functions/save-urls-to-github', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ urls: newUrls })
        });
        
        const result = await saveResponse.json();
        
        if (result.status === 'success') {
          const message = `${result.added} ${t('addedMessage')}Ôºà${uniqueUrls.length} ${t('found')}„ÄÅ${result.duplicates} ${t('duplicateMessage')}Ôºâ`;
          showStatus('scrapeStatus', message, 'success');
          document.getElementById('scrapeStatus').style.display = 'flex';
          document.getElementById('scrapeStats').style.display = 'grid';
          document.getElementById('foundScrape').textContent = uniqueUrls.length;
          document.getElementById('addedScrape').textContent = result.added;
          document.getElementById('duplicateScrape').textContent = result.duplicates;
          document.getElementById('websiteUrl').value = '';
          showNotification(t('scrapingComplete'), 'success');
          setTimeout(() => fetchRanking(), 500);
        } else {
          throw new Error(result.error || 'Unknown error');
        }
      } catch (error) {
        let errorMessage = error.message;
        if (error.message.includes('Failed to fetch') || error.message.includes('CORS')) {
          errorMessage = t('corsError');
        }
        showStatus('scrapeStatus', `${t('error')} ${errorMessage}`, 'error');
        document.getElementById('scrapeStatus').style.display = 'flex';
        showNotification(`${t('error')} ${errorMessage}`);
      } finally {
        document.getElementById('scrapeBtn').disabled = false;
        document.getElementById('scrapeBtn').textContent = 'üîç ' + t('startScraping');
      }
    });
    
    document.getElementById('dark-mode').addEventListener('change', (e) => {
      document.body.classList.toggle('dark-mode', e.checked);
      localStorage.setItem('darkMode', e.checked);
    });
    
    window.addEventListener('DOMContentLoaded', () => {
      const darkMode = localStorage.getItem('darkMode') === 'true';
      if (darkMode) {
        document.body.classList.add('dark-mode');
        document.getElementById('dark-mode').checked = true;
      }
      fetchRanking();
      document.getElementById('refresh-select').dispatchEvent(new Event('change'));
    });
    
    window.copyId = copyId;
    window.openGofile = openGofile;
    window.openModal = openModal;
    window.closeModal = closeModal;
  </script>
</body>
</html>